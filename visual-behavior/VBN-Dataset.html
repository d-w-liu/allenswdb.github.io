

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Visual Behavior Neuropixels Dataset &#8212; SWDB 2023 Data Book</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'visual-behavior/VBN-Dataset';</script>
    <link rel="canonical" href="https://allenswdb.github.io/visual-behavior/VBN-Dataset.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Visual Behavior Neuropixels Session" href="VBN-SessionData.html" />
    <link rel="prev" title="Visual Behavior Neuropixels" href="VB-Neuropixels.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/cropped-SummerWorkshop_Header.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/cropped-SummerWorkshop_Header.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Data Book for Summer Workshop on the Dynamic Brain
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../background/background.html">Background</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../background/Mouse-visual-system.html">Mouse visual system</a></li>
<li class="toctree-l2"><a class="reference internal" href="../background/transgenic-tools.html">Transgenic tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../background/experimental-setup.html">Behavioral apparatus</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../background/Neuropixels-electrophysiology.html">Extracellular electrophysiology</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../visual-coding-np/vcnp-quality-metrics.html">Unit Quality Metrics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../background/Two-photon-calcium-imaging.html">Calcium imaging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../background/Ophys-ephys-comparison.html">Ophys ephys comparison</a></li>
<li class="toctree-l2"><a class="reference internal" href="../background/Optotagging.html">Optotagging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../background/Intrinsic-Signal-Imaging.html">Intrinsic Signal Imaging</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../visual-coding-2p/vc2p-background.html">Visual Coding — 2-photon</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../visual-coding-2p/vc2p-dataset.html">Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visual-coding-2p/vc2p-session-data.html">Getting data from a session</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visual-coding-2p/vc2p-stimuli.html">Visual stimuli</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visual-coding-2p/vc2p-evoked-response.html">Exercise: Evoked response</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visual-coding-2p/vc2p-cross-session-data.html">Cross session data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visual-coding-2p/vc2p-analysis.html">Analysis files and cell specimens table</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../visual-coding-np/vcnp.html">Visual Coding — Neuropixels</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../visual-coding-np/vcnp-quickstart.html">Quick start guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visual-coding-np/vcnp-data-access.html">Accessing Neuropixels Visual Coding Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visual-coding-np/vcnp-units.html">Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visual-coding-np/vcnp-receptive-fields.html">Receptive fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visual-coding-np/vcnp-lfp.html">Local field potential (LFP)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visual-coding-np/vcnp-optotagging.html">Optotagging Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visual-coding-np/vcnp-session.html">Full example of accessing Visual Coding Neuropixels data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visual-coding-np/vcnp-cheatsheet.html">Cheat sheet for visual coding Neuropixels</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visual-coding-np/vcnp-links.html">Other resources</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../cell-type-lookup-table/ctlut-background.html">Cell Type Look-up Table</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../cell-type-lookup-table/ctlut-session-data.html">Session data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cell-type-lookup-table/ctlut-optotagging.html">Optotagging</a></li>





<li class="toctree-l2"><a class="reference internal" href="../cell-type-lookup-table/ctlut-accessing-data.html">Accessing cell type lookup table data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cell-type-lookup-table/ctlut-identifying-tagged-units.html">Identifying tagged neurons</a></li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="vb-background.html">Visual Behavior</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="VB-Behavior.html">Visual Behavior Task</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="VB-BehaviorSessionData.html">Behavior Session Data</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="VB-Ophys.html">Visual Behavior Ophys</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="VBO-Dataset.html">Visual Behavior Ophys Dataset</a></li>





<li class="toctree-l3"><a class="reference internal" href="VBO-ExperimentData.html">Visual Behavior Ophys Experiment Data</a></li>

<li class="toctree-l3"><a class="reference internal" href="VBO-Tutorial-Compare_trial_types.html">Tutorial Comparing Trial Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="VBO-Tutorial-Downloading_data_and_exploring_the_manifest.html">Tutorial Downloading Data</a></li>
</ul>
</li>
<li class="toctree-l2 current active has-children"><a class="reference internal" href="VB-Neuropixels.html">Visual Behavior Neuropixels</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l3 current active"><a class="current reference internal" href="#">Visual Behavior Neuropixels Dataset</a></li>
<li class="toctree-l3"><a class="reference internal" href="VBN-SessionData.html">Visual Behavior Neuropixels Session</a></li>
<li class="toctree-l3"><a class="reference internal" href="VBN-Tutorial-Aligning_Neural_Data_to_Stimuli.html">Tutorial Aligning Neural Data to Stimuli</a></li>
<li class="toctree-l3"><a class="reference internal" href="VBN-Tutorial-Aligning_Behavior_Data_to_Task_Events.html">Tutorial Aligning Behavioral Data to Task Events</a></li>
<li class="toctree-l3"><a class="reference internal" href="VBN-Tutorial-Analyzing_LFP_Data.html">Tutorial Analyzing LFP data</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../microns-em/em-background.html">EM Connectomics</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../microns-em/em-structural-data.html">Dataset Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../microns-em/proofreading.html">Proofreading and Data Quality</a></li>
<li class="toctree-l2"><a class="reference internal" href="../microns-em/em-neuroglancer.html">Neuroglancer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../microns-em/em-dash-apps.html">Dash Apps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../microns-em/em-caveclient-setup.html">Setting up CAVEclient</a></li>
<li class="toctree-l2"><a class="reference internal" href="../microns-em/em-querying-tables.html">Programmatic Access</a></li>
<li class="toctree-l2"><a class="reference internal" href="../microns-em/key-tables.html">Annotation Tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../microns-em/em-volume-data.html">Imagery and Segmentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../microns-em/em-skeletons.html">Skeletons</a></li>
<li class="toctree-l2"><a class="reference internal" href="../microns-em/em-meshes.html">Meshes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../microns-em/em-functional_data.html">MICrONS Functional Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../microns-em/em-coordinates.html">Coordinate Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../microns-em/em-ultrastructure.html">Ultrastructure Resources</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bibliography.html">References</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/allenswdb/allenswdb.github.io" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/allenswdb/allenswdb.github.io/edit/main/databook/visual-behavior/VBN-Dataset.md" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/allenswdb/allenswdb.github.io/issues/new?title=Issue%20on%20page%20%2Fvisual-behavior/VBN-Dataset.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/visual-behavior/VBN-Dataset.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Visual Behavior Neuropixels Dataset</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#vbn-metadata">VBN Metadata</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ecephys-sessions-table">Ecephys sessions table</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#behavior-sessions-table">Behavior Sessions Table</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#units-table">Units Table</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#probes-table">Probes Table</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#channels-table">Channels Table</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="visual-behavior-neuropixels-dataset">
<h1>Visual Behavior Neuropixels Dataset<a class="headerlink" href="#visual-behavior-neuropixels-dataset" title="Permalink to this heading">#</a></h1>
<p>The main entry point to the VBN dataset is the <code>VisualBehaviorNeuropixelsProjectCache</code> class.  This class is responsible for downloading any requested data or metadata as needed and storing it in well known locations.  For detailed info about how to access this data, check out <a class="reference external" href="https://allensdk.readthedocs.io/en/latest/_static/examples/nb/visual_behavior_neuropixels_data_access.html">this tutorial</a></p>
<p>We begin by importing the <code>VisualBehaviorNeuropixelsProjectCache</code>  class.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="kn">from</span> <span class="nn">allensdk.brain_observatory.behavior.behavior_project_cache.</span>\
    <span class="n">behavior_neuropixels_project_cache</span> \
    <span class="kn">import</span> <span class="nn">VisualBehaviorNeuropixelsProjectCache</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/envs/allensdk/lib/python3.8/site-packages/tqdm/auto.py:21: TqdmWarning: IProgress not found. Please update jupyter and ipywidgets. See https://ipywidgets.readthedocs.io/en/stable/user_install.html
  from .autonotebook import tqdm as notebook_tqdm
</pre></div>
</div>
</div>
</div>
<p>Now we can specify our cache directory and set up the cache.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># this path should point to the location of the dataset on your platform</span>
<span class="n">cache_dir</span> <span class="o">=</span> <span class="s1">&#39;/root/capsule/data/&#39;</span>

<span class="n">cache</span> <span class="o">=</span> <span class="n">VisualBehaviorNeuropixelsProjectCache</span><span class="o">.</span><span class="n">from_local_cache</span><span class="p">(</span>
            <span class="n">cache_dir</span><span class="o">=</span><span class="n">cache_dir</span><span class="p">,</span> <span class="n">use_static_cache</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We can use the <code>VisualBehaviorNeuropixelsProjectCache</code> to explore the parameters of this dataset. Let’s start by examining the cache metadata tables.</p>
<section id="vbn-metadata">
<h2>VBN Metadata<a class="headerlink" href="#vbn-metadata" title="Permalink to this heading">#</a></h2>
<p>The data manifest comprises 5 tables:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ecephys_sessions_table</span></code> (64 kB)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">behavior_sessions_table</span></code> (531 kB)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">units_table</span></code> (130 MB)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">probes_table</span></code> (127 kB)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">channels_table</span></code> (28 MB)</p></li>
</ol>
<p>The <code class="docutils literal notranslate"><span class="pre">ecephys_sessions_table</span></code> contains metadata for every <b>Neuropixels recording session</b> in the dataset. We attempted to insert 6 probes for each experiment, but occasionally individual insertions failed. The <code class="docutils literal notranslate"><span class="pre">probe_count</span></code> column tells you how many probes were inserted for a given session. The <code class="docutils literal notranslate"><span class="pre">structure_acronyms</span></code> column indicates which brain areas were targeted. For the majority of mice, there are two recording sessions. These were run on consecutive days with two different image sets, <code class="docutils literal notranslate"><span class="pre">G</span></code> and <code class="docutils literal notranslate"><span class="pre">H</span></code>. The <code class="docutils literal notranslate"><span class="pre">experience_level</span></code> column tells you whether the image set used for a particular recording was the same as the training image set (<code class="docutils literal notranslate"><span class="pre">Familiar</span></code>), or different from the training image set (<code class="docutils literal notranslate"><span class="pre">Novel</span></code>).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">behavior_sessions_table</span></code> contains metadata for each behavior session. Some behavior sessions have Neuropixels data associated with them, while others took place during training in the behavior facility. The different training stages that mice progressed through are described by the <code class="docutils literal notranslate"><span class="pre">session_type</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">units_table</span></code> contains metadata for every unit in the release. Each unit can be linked to the corresponding recording session, probe and channel by the <code class="docutils literal notranslate"><span class="pre">ecephys_session_id</span></code>, <code class="docutils literal notranslate"><span class="pre">ecephys_probe_id</span></code> and <code class="docutils literal notranslate"><span class="pre">ecephys_channel_id</span></code> columns. This table also contains a number of helpful quality metrics, which can be used to filter out contaminated units before analysis. For more guidance on how to use these metrics, check out <a class="reference external" href="https://allensdk.readthedocs.io/en/latest/_static/examples/nb/visual_behavior_neuropixels_quality_metrics.html">this tutorial</a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">probes_table</span></code> contains metadata for each probe insertion.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">channels_table</span></code> contains metadata for each channel recorded during an ephys session. This table provides useful info about where a particular channel is located in the Allen Common Coordinate Framework as well as it’s relative position on the probe.</p>
<p>Now let’s look at each of these tables in more detail to get a better sense of the dataset.</p>
</section>
<section id="ecephys-sessions-table">
<h2>Ecephys sessions table<a class="headerlink" href="#ecephys-sessions-table" title="Permalink to this heading">#</a></h2>
<p>First, let’s load the ecephys_sessions_table and print the columns:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ecephys_sessions_table</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">get_ecephys_session_table</span><span class="p">()</span>
<span class="n">ecephys_sessions_table</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Index([&#39;behavior_session_id&#39;, &#39;date_of_acquisition&#39;, &#39;equipment_name&#39;,
       &#39;session_type&#39;, &#39;mouse_id&#39;, &#39;genotype&#39;, &#39;sex&#39;, &#39;project_code&#39;,
       &#39;age_in_days&#39;, &#39;unit_count&#39;, &#39;probe_count&#39;, &#39;channel_count&#39;,
       &#39;structure_acronyms&#39;, &#39;image_set&#39;, &#39;prior_exposures_to_image_set&#39;,
       &#39;session_number&#39;, &#39;experience_level&#39;, &#39;prior_exposures_to_omissions&#39;,
       &#39;file_id&#39;, &#39;abnormal_histology&#39;, &#39;abnormal_activity&#39;],
      dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
</div>
<p>This table gives us lots of useful metadata about each recording session, including the genotype, sex and age of the mouse that was run, what brain areas were recorded and some important info about the stimulus.</p>
<p>To demystify a few of these columns, let’s briefly review the experimental design. Each mouse was trained with one of two image sets (<code class="docutils literal notranslate"><span class="pre">G</span></code> or <code class="docutils literal notranslate"><span class="pre">H</span></code>). For the majority of mice, we recorded two sessions: one with the trained ‘familiar’ image set and one with a ‘novel’ image set. Note that two of the eight images were shared across these two image sets as diagrammed below for an example mouse. For this mouse, image set <code class="docutils literal notranslate"><span class="pre">G</span></code> (images on blue and purple backgrounds) was used in training and was therefore ‘familiar’, while image set <code class="docutils literal notranslate"><span class="pre">H</span></code> (the two holdover images on purple background plus six novel images on red background) was ‘novel’.</p>
<p><img alt="doctask" src="../_images/image_sets_and_training_trajectories_diagram_defaultsdk_and_unfiltered.webp" /></p>
<p>Each recording session can be defined by a few parameters, including the <code class="docutils literal notranslate"><span class="pre">image_set</span></code> used (G or H), the <code class="docutils literal notranslate"><span class="pre">experience_level</span></code> of the mouse (indicating whether the mouse had seen the image set in previous training sessions) and the <code class="docutils literal notranslate"><span class="pre">session_number</span></code> (indicating whether it was the first or second recording day for the mouse). In bottom bubble of the above diagram, you can see the three different training/recording trajectories mice in this dataset took:</p>
<ul class="simple">
<li><p>Train on G; see G on first recording day; see H on second recording day</p></li>
<li><p>Train on G; see H on first recording day; see G on second recording day</p></li>
<li><p>Train on H; see H on first recording day; see G on second recording day</p></li>
</ul>
<p>The numbers in the recording session cells indicate how many of each session type exist in this dataset. The first number is what the SDK returns by default. The second number (in parentheses) is what the SDK returns without filtering for abnormalities (see below as well as the <a class="reference external" href="https://allensdk.readthedocs.io/en/latest/_static/examples/nb/visual_behavior_neuropixels_data_access.html">Data Access tutorial</a>).</p>
<p>Here is a brief description of each column:</p>
<dl class="simple myst">
<dt>abnormal_activity</dt><dd><p>nan or list List of experiment time stamps when possible epileptic activity was noted.</p>
</dd>
<dt>abnormal_histology</dt><dd><p>nan or list List of brain areas where possible damage was noted in post-hoc imaging.</p>
</dd>
<dt>age_in_days</dt><dd><p>int age of mouse in days</p>
</dd>
<dt>behavior_session_id</dt><dd><p>int unique identifier for a behavior session</p>
</dd>
<dt>channel_count</dt><dd><p>float total number of channels on all probes used for experiment</p>
</dd>
<dt>date_of_acquisition</dt><dd><p>date time object date and time of data acquisition, yyyy-mm-dd hh:mm:ss.</p>
</dd>
<dt>ecephys_session_id</dt><dd><p>int unique identifier for an ecephys recording session</p>
</dd>
<dt>equipment_name</dt><dd><p>string identifier for equipment data was collected on</p>
</dd>
<dt>experience_level</dt><dd><p>string ‘Familiar’: image set mouse was trained on, ‘Novel’: not the image set the mouse was trained on.</p>
</dd>
<dt>file_id</dt><dd><p>int lookup id to retrieve NWB file from S3 or the local cache.</p>
</dd>
<dt>genotype</dt><dd><p>string full genotype of transgenic mouse</p>
</dd>
<dt>image_set</dt><dd><p>string image set shown for a particular behavior session or ephys session</p>
</dd>
<dt>mouse_id</dt><dd><p>int unique identifier for a mouse</p>
</dd>
<dt>prior_exposures_to_image_set</dt><dd><p>float 64 number of prior sessions (during training or ophys) where the mouse was exposed to the image set shown in the current session. Starts at 0 for first exposure</p>
</dd>
<dt>prior_exposures_to_omissions</dt><dd><p>int 64 number of sessions where the mouse was exposed to omissions. Starts at 0 for first exposure. Omissions do not occur during training</p>
</dd>
<dt>prior_exposures_to_session_type</dt><dd><p>int 64 Number of previous sessions (during training or ophys) where the mouse was exposed to the current session type. Starts at 0 for first exposure</p>
</dd>
<dt>project_code</dt><dd><p>string ‘NeuropixelVisualBehavior’–Project this session belongs to</p>
</dd>
<dt>session_number</dt><dd><p>float 64 [1, 2] Indicates whether this session was the first or second recording day for the mouse. Takes values ‘1’ or ‘2’.</p>
</dd>
<dt>session_type</dt><dd><p>string Visual stimulus type displayed during behavior session</p>
</dd>
<dt>sex</dt><dd><p>string [‘M’, ‘F’] Sex of the mouse</p>
</dd>
<dt>structure_acronyms</dt><dd><p>string List of CCF structures recorded during this experiment</p>
</dd>
<dt>unit_count</dt><dd><p>float number of units recorded during this</p>
</dd>
</dl>
</section>
<section id="behavior-sessions-table">
<h2>Behavior Sessions Table<a class="headerlink" href="#behavior-sessions-table" title="Permalink to this heading">#</a></h2>
<p>In this dataset, mice are trained on a visual change detection task. This task involves a continuous stream of stimuli, and mice learn to lick in response to a change in the stimulus identity to earn a water reward. There are different stages of training in this task, described below. The metadata for each behavior session in the dataset can be found in the <code class="docutils literal notranslate"><span class="pre">behavior_sessions_table</span></code> and can be used to build a training history for each mouse. Importantly, this table lists all of the behavior sessions for each mouse from the beginning of its training.</p>
<p>Let’s load the table and take a look:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">behavior_sessions</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">get_behavior_session_table</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total number of behavior sessions: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">behavior_sessions</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">behavior_sessions</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Total number of behavior sessions: 3424
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>equipment_name</th>
      <th>genotype</th>
      <th>mouse_id</th>
      <th>sex</th>
      <th>age_in_days</th>
      <th>session_number</th>
      <th>prior_exposures_to_session_type</th>
      <th>prior_exposures_to_image_set</th>
      <th>prior_exposures_to_omissions</th>
      <th>ecephys_session_id</th>
      <th>date_of_acquisition</th>
      <th>session_type</th>
      <th>image_set</th>
      <th>file_id</th>
    </tr>
    <tr>
      <th>behavior_session_id</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1055198750</th>
      <td>NP.1</td>
      <td>wt/wt</td>
      <td>531237</td>
      <td>F</td>
      <td>158</td>
      <td>45</td>
      <td>5</td>
      <td>38.0</td>
      <td>0</td>
      <td>1.055182e+09</td>
      <td>2020-10-07 09:40:30.407000+00:00</td>
      <td>HABITUATION_5_images_G_handoff_ready_3uL_reward</td>
      <td>G</td>
      <td>1022</td>
    </tr>
    <tr>
      <th>1052162513</th>
      <td>NP.1</td>
      <td>Vip-IRES-Cre/wt;Ai32(RCL-ChR2(H134R)_EYFP)/wt</td>
      <td>530862</td>
      <td>M</td>
      <td>143</td>
      <td>41</td>
      <td>2</td>
      <td>29.0</td>
      <td>0</td>
      <td>1.051331e+09</td>
      <td>2020-09-18 10:18:25.503000+00:00</td>
      <td>HABITUATION_5_images_G_handoff_ready_3uL_reward</td>
      <td>G</td>
      <td>1023</td>
    </tr>
    <tr>
      <th>1056100734</th>
      <td>NP.1</td>
      <td>wt/wt</td>
      <td>531237</td>
      <td>F</td>
      <td>163</td>
      <td>48</td>
      <td>8</td>
      <td>41.0</td>
      <td>0</td>
      <td>1.056090e+09</td>
      <td>2020-10-12 12:31:57.133000+00:00</td>
      <td>HABITUATION_5_images_G_handoff_ready_3uL_reward</td>
      <td>G</td>
      <td>1024</td>
    </tr>
    <tr>
      <th>1055397049</th>
      <td>NP.1</td>
      <td>wt/wt</td>
      <td>531237</td>
      <td>F</td>
      <td>159</td>
      <td>46</td>
      <td>6</td>
      <td>39.0</td>
      <td>0</td>
      <td>1.055387e+09</td>
      <td>2020-10-08 10:46:16.623000+00:00</td>
      <td>HABITUATION_5_images_G_handoff_ready_3uL_reward</td>
      <td>G</td>
      <td>1025</td>
    </tr>
    <tr>
      <th>1052162543</th>
      <td>NP.1</td>
      <td>wt/wt</td>
      <td>533537</td>
      <td>M</td>
      <td>128</td>
      <td>30</td>
      <td>0</td>
      <td>23.0</td>
      <td>0</td>
      <td>1.052096e+09</td>
      <td>2020-09-22 10:54:33.351000+00:00</td>
      <td>HABITUATION_5_images_G_handoff_ready_5uL_reward</td>
      <td>G</td>
      <td>1026</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>You can see that there are many more sessions here than in the ecephys_sessions_table. But the columns are defined in the same way.</p>
<p>To see how to use this table to look at the training trajectory for one mouse, check out <a class="reference external" href="https://allensdk.readthedocs.io/en/latest/_static/examples/nb/visual_behavior_neuropixels_analyzing_behavior_only_data.html">this tutorial</a></p>
</section>
<section id="units-table">
<h2>Units Table<a class="headerlink" href="#units-table" title="Permalink to this heading">#</a></h2>
<p>The <b>units</b> metadata table contains important quality and waveform metrics for every unit recorded in this dataset. For more info about how to use these quality metrics to filter units for analysis, check out <a class="reference external" href="https://allensdk.readthedocs.io/en/latest/_static/examples/nb/visual_behavior_neuropixels_quality_metrics.html">this tutorial</a></p>
<p>Let’s grab this table and take a look at the columns:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">units</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">get_unit_table</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;This dataset contains </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">units</span><span class="p">)</span><span class="si">}</span><span class="s1"> total units&#39;</span><span class="p">)</span>

<span class="n">units</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>This dataset contains 319013 total units
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ecephys_channel_id</th>
      <th>ecephys_probe_id</th>
      <th>ecephys_session_id</th>
      <th>amplitude_cutoff</th>
      <th>anterior_posterior_ccf_coordinate</th>
      <th>dorsal_ventral_ccf_coordinate</th>
      <th>left_right_ccf_coordinate</th>
      <th>cumulative_drift</th>
      <th>d_prime</th>
      <th>structure_acronym</th>
      <th>...</th>
      <th>valid_data</th>
      <th>amplitude</th>
      <th>waveform_duration</th>
      <th>waveform_halfwidth</th>
      <th>PT_ratio</th>
      <th>recovery_slope</th>
      <th>repolarization_slope</th>
      <th>spread</th>
      <th>velocity_above</th>
      <th>velocity_below</th>
    </tr>
    <tr>
      <th>unit_id</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1157005856</th>
      <td>1157001834</td>
      <td>1046469925</td>
      <td>1046166369</td>
      <td>0.500000</td>
      <td>8453.0</td>
      <td>3353.0</td>
      <td>6719.0</td>
      <td>140.32</td>
      <td>6.088133</td>
      <td>MB</td>
      <td>...</td>
      <td>True</td>
      <td>286.132665</td>
      <td>0.151089</td>
      <td>0.096147</td>
      <td>0.310791</td>
      <td>-0.227726</td>
      <td>0.961313</td>
      <td>20.0</td>
      <td>-0.457845</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1157005853</th>
      <td>1157001834</td>
      <td>1046469925</td>
      <td>1046166369</td>
      <td>0.323927</td>
      <td>8453.0</td>
      <td>3353.0</td>
      <td>6719.0</td>
      <td>239.76</td>
      <td>4.635583</td>
      <td>MB</td>
      <td>...</td>
      <td>True</td>
      <td>181.418835</td>
      <td>0.357119</td>
      <td>0.192295</td>
      <td>0.531490</td>
      <td>-0.150522</td>
      <td>0.732741</td>
      <td>30.0</td>
      <td>2.060302</td>
      <td>-2.060302</td>
    </tr>
    <tr>
      <th>1157005720</th>
      <td>1157001786</td>
      <td>1046469925</td>
      <td>1046166369</td>
      <td>0.044133</td>
      <td>8575.0</td>
      <td>3842.0</td>
      <td>6590.0</td>
      <td>263.32</td>
      <td>5.691955</td>
      <td>MRN</td>
      <td>...</td>
      <td>True</td>
      <td>180.866205</td>
      <td>0.521943</td>
      <td>0.178559</td>
      <td>0.612217</td>
      <td>-0.024239</td>
      <td>0.539687</td>
      <td>80.0</td>
      <td>0.000000</td>
      <td>0.863364</td>
    </tr>
    <tr>
      <th>1157006074</th>
      <td>1157001929</td>
      <td>1046469925</td>
      <td>1046166369</td>
      <td>0.000583</td>
      <td>8212.0</td>
      <td>2477.0</td>
      <td>6992.0</td>
      <td>154.64</td>
      <td>6.049284</td>
      <td>NOT</td>
      <td>...</td>
      <td>True</td>
      <td>574.984215</td>
      <td>0.343384</td>
      <td>0.192295</td>
      <td>0.470194</td>
      <td>-0.356670</td>
      <td>2.258649</td>
      <td>40.0</td>
      <td>1.373534</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>1157006072</th>
      <td>1157001929</td>
      <td>1046469925</td>
      <td>1046166369</td>
      <td>0.500000</td>
      <td>8212.0</td>
      <td>2477.0</td>
      <td>6992.0</td>
      <td>242.58</td>
      <td>4.745499</td>
      <td>NOT</td>
      <td>...</td>
      <td>True</td>
      <td>315.794115</td>
      <td>0.329648</td>
      <td>0.164824</td>
      <td>0.488276</td>
      <td>-0.210010</td>
      <td>1.320270</td>
      <td>70.0</td>
      <td>0.412060</td>
      <td>0.343384</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 34 columns</p>
</div></div></div>
</div>
<p>For more information about many of the metrics included in this table and how to use them to guide your analysis, see our <a class="reference external" href="https://allensdk--2471.org.readthedocs.build/en/2471/_static/examples/nb/visual_behavior_neuropixels_quality_metrics.html">quality metrics tutorial</a>. For now, here’s a brief description of each column:</p>
<p><strong>General Metadata</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">ecephys_channel_id</span></code>:                   unique ID of channel on which unit’s peak waveform occurred<br />
<code class="docutils literal notranslate"><span class="pre">ecephys_probe_id</span></code>:                     unique ID for probe on which unit was recorded<br />
<code class="docutils literal notranslate"><span class="pre">ecephys_session_id</span></code>:                   unique ID for session during which unit was recorded<br />
<code class="docutils literal notranslate"><span class="pre">anterior_posterior_ccf_coordinate</span></code>:    CCF coord in the AP axis<br />
<code class="docutils literal notranslate"><span class="pre">dorsal_ventral_ccf_coordinate</span></code>:        CCF coord in the DV axis<br />
<code class="docutils literal notranslate"><span class="pre">left_right_ccf_coordinate</span></code>:            CCF coord in the left/right axis<br />
<code class="docutils literal notranslate"><span class="pre">structure_acronym</span></code>:                    CCF acronym for area to which unit was assigned<br />
<code class="docutils literal notranslate"><span class="pre">structure_id</span></code>:                         CCF structure ID for the area to which unit was assigned<br />
<code class="docutils literal notranslate"><span class="pre">probe_horizontal_position</span></code>:            Horizontal (perpindicular to shank) probe position of each unit’s peak channel in microns<br />
<code class="docutils literal notranslate"><span class="pre">probe_vertical_position</span></code>:              Vertical (along shank) probe position of each unit’s peak channel in microns</p>
<p><strong>Waveform metrics</strong>: Look <a class="reference external" href="https://github.com/AllenInstitute/ecephys_spike_sorting/tree/master/ecephys_spike_sorting/modules/mean_waveforms">here</a> for more detail on these metrics and the code that computes them. For the below descriptions the ‘1D waveform’ is defined as the waveform on the peak channel. The ‘2D waveform’ is the waveform across channels centered on the peak channel.</p>
<p><code class="docutils literal notranslate"><span class="pre">amplitude</span></code>:                            Peak to trough amplitude for mean 1D waveform in microvolts<br />
<code class="docutils literal notranslate"><span class="pre">waveform_duration</span></code>:                    Time from trough to peak for 1D waveform in milliseconds<br />
<code class="docutils literal notranslate"><span class="pre">waveform_halfwidth</span></code>:                   Width of 1D waveform at half-amplitude in milliseconds<br />
<code class="docutils literal notranslate"><span class="pre">PT_ratio</span></code>:                             Ratio of the max (peak) to the min (trough) amplitudes for 1D waveform<br />
<code class="docutils literal notranslate"><span class="pre">recovery_slope</span></code>:                       Slope of recovery of 1D waveform to baseline after repolarization (coming down from peak)<br />
<code class="docutils literal notranslate"><span class="pre">repolarization_slope</span></code>:                 Slope of repolarization of 1D waveform to baseline after trough<br />
<code class="docutils literal notranslate"><span class="pre">spread</span></code>:                               Range of channels for which the spike amplitude was above 12% of the peak channel amplitude<br />
<code class="docutils literal notranslate"><span class="pre">velocity_above</span></code>:                       Slope of spike propagation velocity traveling in dorsal direction from soma (note to avoid infinite values, this is actaully the inverse of velocity: ms/mm)<br />
<code class="docutils literal notranslate"><span class="pre">velocity_below</span></code>:                       Slope of spike propagation velocity traveling in ventral direction from soma (note to avoid infinite values, this is actually the inverse of velocity: ms/mm)<br />
<code class="docutils literal notranslate"><span class="pre">snr</span></code>:                                  signal-to-noise ratio for 1D waveform</p>
<p><strong>Quality metrics</strong>: Look <a class="reference external" href="https://github.com/AllenInstitute/ecephys_spike_sorting/tree/7e567a6fc3fd2fc0eedef750b83b8b8a0d469544/ecephys_spike_sorting/modules/quality_metrics">here</a> for more detail on these metrics and the code that computes them.</p>
<p><code class="docutils literal notranslate"><span class="pre">amplitude_cutoff</span></code>:                     estimate of miss rate based on amplitude histogram (ie fraction of spikes estimated to have been below detection threshold)<br />
<code class="docutils literal notranslate"><span class="pre">cumulative_drift</span></code>:                     cumulative change in spike depth along probe throughout the recording<br />
<code class="docutils literal notranslate"><span class="pre">d_prime</span></code>:                              classification accuracy based on LDA<br />
<code class="docutils literal notranslate"><span class="pre">firing_rate</span></code>:                          Mean firing rate over entire recording<br />
<code class="docutils literal notranslate"><span class="pre">isi_violations</span></code>:                       Ratio of refractory violation rate to total spike rate<br />
<code class="docutils literal notranslate"><span class="pre">isolation_distance</span></code>:                   Distance to nearest cluster in Mahalanobis space<br />
<code class="docutils literal notranslate"><span class="pre">l_ratio</span></code>:                              The Mahalanobis distance and chi-squared inverse cdf are used to find the probability of cluster membership for each spike.<br />
<code class="docutils literal notranslate"><span class="pre">max_drift</span></code>:                            Maximum change in unit depth across recording<br />
<code class="docutils literal notranslate"><span class="pre">nn_hit_rate</span></code>:                          Fraction of nearest neighbors in PCA space for spikes in unit cluster that are also in unit cluster<br />
<code class="docutils literal notranslate"><span class="pre">nn_miss_rate</span></code>:                         Fraction of nearest neighbors for spikes outside unit cluster than are in unit cluster<br />
<code class="docutils literal notranslate"><span class="pre">presence_ratio</span></code>:                       Fraction of time during session for which a unit was spiking<br />
<code class="docutils literal notranslate"><span class="pre">silhouette_score</span></code>:                     Standard metric for cluster overlap, computed in PCA space<br />
<code class="docutils literal notranslate"><span class="pre">quality</span></code>:                              Label assigned based on waveform shape as described <a class="reference external" href="https://github.com/AllenInstitute/ecephys_spike_sorting/tree/7e567a6fc3fd2fc0eedef750b83b8b8a0d469544/ecephys_spike_sorting/modules/noise_templates">here</a>. Either ‘good’ for physiological waveforms or ‘noise’ for artifactual waveforms.</p>
</section>
<section id="probes-table">
<h2>Probes Table<a class="headerlink" href="#probes-table" title="Permalink to this heading">#</a></h2>
<p>The <b>probes</b> table contains useful info about every probe insertion in the dataset.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">probes</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">get_probe_table</span><span class="p">()</span>
<span class="n">probes</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ecephys_session_id</th>
      <th>name</th>
      <th>sampling_rate</th>
      <th>lfp_sampling_rate</th>
      <th>phase</th>
      <th>has_lfp_data</th>
      <th>unit_count</th>
      <th>channel_count</th>
      <th>structure_acronyms</th>
      <th>file_id</th>
    </tr>
    <tr>
      <th>ecephys_probe_id</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1044506933</th>
      <td>1044385384</td>
      <td>probeB</td>
      <td>30000.178402</td>
      <td>2500.014867</td>
      <td>1.0</td>
      <td>True</td>
      <td>701</td>
      <td>384</td>
      <td>['CA1', 'DG', 'LP', 'POL', 'PoT', 'VISpm', 'ro...</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1044506934</th>
      <td>1044385384</td>
      <td>probeC</td>
      <td>30000.049852</td>
      <td>2500.004154</td>
      <td>1.0</td>
      <td>True</td>
      <td>307</td>
      <td>384</td>
      <td>['MB', 'MRN', 'POST', 'SCig', 'VISp', 'root']</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1044506935</th>
      <td>1044385384</td>
      <td>probeD</td>
      <td>30000.029115</td>
      <td>2500.002426</td>
      <td>1.0</td>
      <td>True</td>
      <td>521</td>
      <td>384</td>
      <td>['CA1', 'CA3', 'DG', 'LGv', 'MB', 'TH', 'VISl'...</td>
      <td>2</td>
    </tr>
    <tr>
      <th>1044506936</th>
      <td>1044385384</td>
      <td>probeE</td>
      <td>30000.075851</td>
      <td>2500.006321</td>
      <td>1.0</td>
      <td>True</td>
      <td>282</td>
      <td>384</td>
      <td>['CA1', 'DG', 'MB', 'MGd', 'MGm', 'MRN', 'SGN'...</td>
      <td>3</td>
    </tr>
    <tr>
      <th>1044506937</th>
      <td>1044385384</td>
      <td>probeF</td>
      <td>29999.959578</td>
      <td>2499.996631</td>
      <td>1.0</td>
      <td>True</td>
      <td>368</td>
      <td>384</td>
      <td>['CA1', 'DG', 'LP', 'MRN', 'POL', 'PoT', 'SGN'...</td>
      <td>4</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Here’s a brief description of every column:</p>
<dl class="simple myst">
<dt>ecephys_probe_id</dt><dd><p>int Unique identifier for probe insertion</p>
</dd>
<dt>ecephys_session_id</dt><dd><p>int Unique identifier for ecephys session for this insertion</p>
</dd>
<dt>name</dt><dd><p>string Name of probe indicating which of the six probe positions this probe filled (A-F).</p>
</dd>
<dt>sampling_rate</dt><dd><p>float Sampling rate for AP band data</p>
</dd>
<dt>has_lfp_data</dt><dd><p>bool Flag indicating whether LFP data was collected on this probe</p>
</dd>
<dt>lfp_sampling_rate</dt><dd><p>float Sampling rate for LFP data</p>
</dd>
<dt>phase</dt><dd><p>float Neuropixels generation for this probe (all probes in this dataset are Neuropixels 1.0)</p>
</dd>
<dt>unit_count</dt><dd><p>int Number of units recorded for this insertion</p>
</dd>
<dt>channel_count</dt><dd><p>int Number of channels available for recording on this insertion</p>
</dd>
<dt>structure_acronyms</dt><dd><p>string List of areas recorded for this probe insertion</p>
</dd>
</dl>
</section>
<section id="channels-table">
<h2>Channels Table<a class="headerlink" href="#channels-table" title="Permalink to this heading">#</a></h2>
<p>Metadata for every probe channel recorded in this dataset. This table can be merged with the units table to get CCF area assignments for each unit.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">channels</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">get_channel_table</span><span class="p">()</span>
<span class="n">channels</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ecephys_probe_id</th>
      <th>ecephys_session_id</th>
      <th>probe_channel_number</th>
      <th>probe_vertical_position</th>
      <th>probe_horizontal_position</th>
      <th>anterior_posterior_ccf_coordinate</th>
      <th>dorsal_ventral_ccf_coordinate</th>
      <th>left_right_ccf_coordinate</th>
      <th>structure_acronym</th>
      <th>unit_count</th>
      <th>valid_data</th>
    </tr>
    <tr>
      <th>ecephys_channel_id</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1049365509</th>
      <td>1048089911</td>
      <td>1047969464</td>
      <td>0</td>
      <td>20.0</td>
      <td>43.0</td>
      <td>8445.0</td>
      <td>4013.0</td>
      <td>6753.0</td>
      <td>MRN</td>
      <td>0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>1049365511</th>
      <td>1048089911</td>
      <td>1047969464</td>
      <td>1</td>
      <td>20.0</td>
      <td>11.0</td>
      <td>8443.0</td>
      <td>4005.0</td>
      <td>6755.0</td>
      <td>MRN</td>
      <td>5</td>
      <td>True</td>
    </tr>
    <tr>
      <th>1049365512</th>
      <td>1048089911</td>
      <td>1047969464</td>
      <td>2</td>
      <td>40.0</td>
      <td>59.0</td>
      <td>8441.0</td>
      <td>3997.0</td>
      <td>6757.0</td>
      <td>MRN</td>
      <td>0</td>
      <td>True</td>
    </tr>
    <tr>
      <th>1049365513</th>
      <td>1048089911</td>
      <td>1047969464</td>
      <td>3</td>
      <td>40.0</td>
      <td>27.0</td>
      <td>8439.0</td>
      <td>3989.0</td>
      <td>6759.0</td>
      <td>MRN</td>
      <td>5</td>
      <td>True</td>
    </tr>
    <tr>
      <th>1049365514</th>
      <td>1048089911</td>
      <td>1047969464</td>
      <td>4</td>
      <td>60.0</td>
      <td>43.0</td>
      <td>8438.0</td>
      <td>3981.0</td>
      <td>6761.0</td>
      <td>MRN</td>
      <td>7</td>
      <td>True</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Here are the columns:</p>
<dl class="simple myst">
<dt>ecephys_channel_id</dt><dd><p>Unique identifier for each channel. This is the id used in the units <code>ecephys_channel_id</code> column.</p>
</dd>
<dt>ecephys_probe_id</dt><dd><p>int Unique identifier for probe insertion</p>
</dd>
<dt>ecephys_session_id</dt><dd><p>int Unique identifier for ecephys session for this insertion</p>
</dd>
<dt>anterior_posterior_ccf_coordinate</dt><dd><p>CCF coord in the AP axis</p>
</dd>
<dt>dorsal_ventral_ccf_coordinate</dt><dd><p>CCF coord in the DV axis</p>
</dd>
<dt>left_right_ccf_coordinate</dt><dd><p>CCF coord in the left/right axis</p>
</dd>
<dt>structure_acronym</dt><dd><p>CCF acronym for area to which channel was assigned</p>
</dd>
<dt>probe_horizontal_position</dt><dd><p>Horizontal (perpindicular to shank) probe position of each unit’s peak channel in microns</p>
</dd>
<dt>probe_vertical_position</dt><dd><p>Vertical (along shank) probe position of each unit’s peak channel in microns</p>
</dd>
<dt>probe_channel_number</dt><dd><p>Index of channel position on probe (0-383 with 0 at tip of probe)</p>
</dd>
<dt>unit_count</dt><dd><p>int Number of units assigned to this channel</p>
</dd>
</dl>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "allensdk"
        },
        kernelOptions: {
            name: "allensdk",
            path: "./visual-behavior"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'allensdk'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="VB-Neuropixels.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Visual Behavior Neuropixels</p>
      </div>
    </a>
    <a class="right-next"
       href="VBN-SessionData.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Visual Behavior Neuropixels Session</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#vbn-metadata">VBN Metadata</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ecephys-sessions-table">Ecephys sessions table</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#behavior-sessions-table">Behavior Sessions Table</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#units-table">Units Table</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#probes-table">Probes Table</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#channels-table">Channels Table</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Saskia de Vries, Marina Garrett, Corbett Bennett, Galen Lynch, Anna Lakunina, Casey Schneider-Mizell
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>